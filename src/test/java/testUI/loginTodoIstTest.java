package testUI;

import io.qameta.allure.Description;
import io.qameta.allure.Owner;
import io.qameta.allure.junit4.DisplayName;
import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import pages.CompleteDataPage;
import pages.LoginPage;
import pages.MainPage;
import pages.WelcomePage;
import session.Session;

//usando Junit como motor de pruebas
public class loginTodoIstTest {

    MainPage mainPage = new MainPage();
    LoginPage loginPage = new LoginPage();
    CompleteDataPage completeDataPage = new CompleteDataPage();
    WelcomePage welcomePage = new WelcomePage();

    @Before
    public void before() {
        Session.getInstance().getDriver().get("https://todoist.com/es");
        //Session.getInstance().getDriver().navigate().to("");
    }

    @DisplayName("verify The Login Using Email, Password And Name")
    @Description("This test case is to verify The Login Using Email, Password And Name")
    @Owner("Grecia Machaca")
    @Test
    public void verifyTheLoginEmailAndPassword() throws InterruptedException {
        String name = "Grace";
        mainPage.signUpButton.click();
        loginPage.emailTextBox.type("grace.lopez.martinez@gmail.com");
        loginPage.signupButton.click();
        completeDataPage.nameTextBox.type(name);
        completeDataPage.passwordTextBox.type("l0pezGr4c3123");
        completeDataPage.signupButton.click();
        boolean verify = welcomePage.greetingLabel.findText().contains(name);
        //verification
        Thread.sleep(2000);
        Assert.assertEquals("ERROR | no se puedo realizar el login", true, verify);

    }

    @After
    public void after() {
        Session.getInstance().closeBrowser();
    }
}
